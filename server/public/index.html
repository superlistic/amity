<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>be more</title>
  </head>
  <body>
    <input id="username" type="text" /><input
      type="button"
      value="relay"
      onClick="relay()"
    />
    <ul id="events"></ul>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();

      const relay = () => {
        const msg = document.querySelector('#username').value;
        console.log(msg);
        socket.emit('relay', { msg: msg });
      };
      const disconnect = () => {
        const username = document.querySelector('#username').value;
        console.log(username);
        socket.emit('auth', { username });
        // $events.appendChild(newItem('login with ' + username));
      };
      const $events = document.getElementById('events');

      const newItem = content => {
        const item = document.createElement('li');
        item.innerText = content;
        return item;
      };

      socket.on('connect', () => {
        $events.appendChild(newItem('connect'));
      });
      socket.on('partnerMatch', payload => {
        $events.appendChild(
          newItem('user connected: ' + JSON.stringify(payload))
        );
      });
      socket.on('relay', payload => {
        $events.appendChild(newItem('relay: ' + JSON.stringify(payload)));
      });
    </script>
  </body>
</html>
