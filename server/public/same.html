<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>same</title>
    <script defer src="/socket.io/socket.io.js"></script>
    <!-- <script defer src="/test/adapter.js"></script> -->
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <!-- <script defer src="/test/AmityRTC.js"></script> -->
  </head>
  <body>
    <script>
      const config = { iceServers: [{ url: 'stun:stun.l.google.com:19302' }] };
      let conn1;
      let conn2;

      const p1 = new Peer(config);
      const p2 = new Peer(config);

      p1.on('open', function (id) {
        console.log(' p1 ID is: ' + id);
        // Receive messages
        conn1.on('data', function (data) {
          console.log('Received', data);
        });
        // Send messages
        conn1.send('Hello!');
      });
      p2.on('open', function (id) {
        console.log(' p2 ID is: ' + id);
        // Receive messages
        conn2.on('data', function (data) {
          console.log('Received', data);
        });
        // Send messages
        conn2.send('Hello!');
      });

      const connect = () => {
        const id = document.getElementById('idIn').value;
        console.log(id);
        p1.connect(id);
      };

      p2.on('connection', function (conn) {
        console.log(conn);
        conn2 = conn;
      });
    </script>
    <input type="text" id="idIn" value="" />
    <input type="button" value="p1.connect" onclick="connect()" />
  </body>
</html>
